% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/bayestest.R
\name{bfttest}
\alias{bfttest}
\title{Bayesian Sequential t-Test or Non-Parametric Test}
\usage{
bfttest(
  x = NULL,
  y = NULL,
  formula = NULL,
  data = NULL,
  alternative = c("two.sided", "less", "greater"),
  mu = 0,
  parametric = TRUE,
  prior.loc = 0,
  prior.r = 0.1,
  nstart = "auto",
  nsamples = "auto",
  exact = TRUE,
  parallel = TRUE,
  data_type = c("unknown", "summed_bits", "continuous", "integer"),
  n_bits = NULL,
  bit_probability = NULL
)
}
\arguments{
\item{x}{A numeric vector of observations or a formula for independent samples test}

\item{y}{Optional numeric vector for paired samples test}

\item{formula}{Formula of form response ~ group where group has exactly 2 levels}

\item{data}{Optional data frame containing the variables in formula}

\item{alternative}{Direction of alternative hypothesis: "two.sided", "greater", or "less"}

\item{mu}{Null hypothesis value (default = 0, only for one-sample parametric test)}

\item{parametric}{Logical. If TRUE (default), uses t-test. If FALSE, uses Wilcoxon/Mann-Whitney}

\item{prior.loc}{Location parameter for Cauchy prior (default = 0)}

\item{prior.r}{Scale parameter for Cauchy prior (default = 0.1). Use sqrt(2)/2 for default JZS prior.}

\item{nstart}{Minimum observations before first BF calculation ("auto" or >= 2)}

\item{nsamples}{Number of MCMC samples for non-parametric tests (default = adaptive sampling based on N)}

\item{exact}{Logical. If TRUE, calculates BF for all points}

\item{parallel}{Logical. If TRUE (default), uses parallel processing across available 
CPU cores (detectCores() - 1), providing substantial speedup especially for 
non-parametric tests with large samples. Set to FALSE for reproducibility across 
sessions or when debugging errors.}
}
\value{
A list of class "seqbf" containing:
  \itemize{
    \item t-value or W-value: Sequential test statistics
    \item p-value: Sequential p-values
    \item BF: Sequential Bayes Factors
    \item delta: Sequential delta estimates (posterior medians for effect size)
    \item delta.lower: Lower bounds of 95% credible intervals for delta
    \item delta.upper: Upper bounds of 95% credible intervals for delta
    \item test type: "one-sample", "paired", or "independent"
    \item parametric: Logical indicating test type
    \item prior: List with prior distribution details
    \item sample size: Number of observations
    \item alternative: Chosen alternative hypothesis
  }
}
\description{
Calculates sequential Bayes Factors for parametric t-tests or non-parametric 
rank-based tests (Wilcoxon/Mann-Whitney), showing how evidence evolves as data accumulates.
For parametric tests, uses BFDA package. For non-parametric tests, uses van Doorn et al.'s
latent normal approach with Cauchy priors on effect size.
}
\note{
Adaptive sampling uses 
- 250 samples for intermediate steps and 1000 samples for final BF for N <= 500
- 150 samples for intermediate steps and 750 samples for final BF for 500 < N <= 2000
- 100 samples for intermediate steps and 500 samples for final BF for N > 2000

Parallel processing can significantly speed up computation, especially for non-parametric 
tests with large samples. Set parallel = FALSE for reproducible results or debugging.
}
\examples{
# Parametric one-sample test
x <- rnorm(30, 0.5, 1)
result1 <- bfttest(x, alternative = "greater")

# Non-parametric independent samples test with parallel processing (default, fast)
group <- rep(c("A", "B"), each = 15)
values <- c(rnorm(15), rnorm(15, 0.5))
df <- data.frame(values = values, group = group)
result2 <- bfttest(values ~ group, data = df, parametric = FALSE)

# For reproducibility or debugging, disable parallel processing
result2b <- bfttest(values ~ group, data = df, parametric = FALSE, parallel = FALSE)

# Non-parametric paired samples test
pre <- rnorm(20)
post <- pre + rnorm(20, 0.5)
result3 <- bfttest(pre, post, parametric = FALSE)
}
